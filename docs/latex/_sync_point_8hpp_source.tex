\doxysection{Sync\+Point.\+hpp}
\hypertarget{_sync_point_8hpp_source}{}\label{_sync_point_8hpp_source}\index{engine/src/Systems/Jobs/SyncPoint.hpp@{engine/src/Systems/Jobs/SyncPoint.hpp}}
\mbox{\hyperlink{_sync_point_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Created\ by\ Michael\ Desmedt\ on\ 20/06/2025.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_job_types_8hpp}{JobTypes.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_handle_8hpp}{Core/Handle.hpp}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_void_architect_1_1_jobs}{VoidArchitect::Jobs}}}
\DoxyCodeLine{00009\ \{}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{comment}{//\ ===\ Forward\ Declarations\ ===}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job}{Job}};}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point}{SyncPoint}};}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_void_architect_1_1_jobs_af593f8164f5ce6fc7c221fc7ac9613e7}{JobHandle}}\ =\ Handle<Job>;}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_void_architect_1_1_jobs_aefce444dfbbc6313f911cbbf2ce08d4c}{SyncPointHandle}}\ =\ Handle<SyncPoint>;}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{comment}{//\ ===\ SyncPoint\ Core\ Structure\ ===}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Core\ Synchronization\ Data\ (Hot\ Path)\ ===}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ std::atomic<uint32\_t>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a19da0944e153737e7d7909777c8d0e60}{counter}};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ std::atomic<JobResult::Status>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ae04a56c683dda3f719dc5c1b786e1383}{status}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Continuation\ Management\ (Hybrid\ Storage)\ ===}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a76f110192596e8dc7c086e231eec4ef3}{INLINE\_CONTINUATIONS}}\ =\ 6;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ std::array<std::atomic<JobHandle>,\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a76f110192596e8dc7c086e231eec4ef3}{INLINE\_CONTINUATIONS}}>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_adb3be18de1adeacd0148478403d028e6}{inlineContinuations}};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ std::atomic<uint8\_t>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a649a1d4b32e6ecaf32edcd107dfe1d68}{inlineCount}}\{0\};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ std::atomic<VAArray<JobHandle>*>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_aad4c58b0094f6fbed04f1e7a4723265b}{overflowContinuations}}\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ std::atomic<bool>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_aba7522e460211cfb838d2eda7a8d386f}{overflowLock}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Metadata\ and\ Debug\ ===}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ace943cecd77d506149a1f174552ce556}{debugName}};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ std::chrono::high\_resolution\_clock::time\_point\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a0e1979f0f75047c0f5d7887d810702cd}{creationTime}};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Constructors\ ===}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}(uint32\_t\ initialCount,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ name);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_aa83212429d6fa0e7397fc53a35e04016}{\string~SyncPoint}}();}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Non-\/copyable\ and\ non-\/movable\ (contains\ atomic\ members)}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_aacde2ca3100ab8e65e9f430da30ccaaf}{SyncPoint}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}\&\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ae1e0200c9f88a880a96a378e228d0f5a}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a220b220abd48fdf9c2851e6ada7cc7ea}{SyncPoint}}(\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}\&\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a1173b57f0383b9596f363438b89672cf}{operator=}}(\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a7ec5d8f6ffed09e8688b96fb2d8f4a5a}{SyncPoint}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Core\ Synchronization\ Operations\ ===}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a1d4cccc10ad67ca9ecd7856d1346505a}{DecrementAndCheck}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job_result}{JobResult}}\&\ result);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_aeeb648d851a4b36e965177fbe0dae810}{IsSignaled}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00127\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a19da0944e153737e7d7909777c8d0e60}{counter}}.load(std::memory\_order\_acquire)\ ==\ 0;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a875a3ba515dfdb8c67a254d6f4cb3081}{GetPendingCount}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00134\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a19da0944e153737e7d7909777c8d0e60}{counter}}.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job_result_a44981551b9c18ba6fe56bf3938ab563c}{JobResult::Status}}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_af38941ed4ccfd628eedcb3c78c366cac}{GetStatus}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00141\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ae04a56c683dda3f719dc5c1b786e1383}{status}}.load(std::memory\_order\_acquire);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Continuation\ Management\ ===}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ad3718aa23182d93c540ee28b28575652}{AddContinuation}}(\mbox{\hyperlink{namespace_void_architect_1_1_jobs_af593f8164f5ce6fc7c221fc7ac9613e7}{JobHandle}}\ handle);}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ VAArray<JobHandle>\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ac34daddd861e10c0e41a7a06438be41a}{GetContinuations}}();}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Status\ and\ Timing\ Information\ ===}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_aca8f66420847392d80ac6608bc118735}{GetStatusString}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00172\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ae04a56c683dda3f719dc5c1b786e1383}{status}}.load(std::memory\_order\_relaxed))}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job_result_a44981551b9c18ba6fe56bf3938ab563ca505a83f220c02df2f85c3810cd9ceb38}{JobResult::Status::Success}}:}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Success"{}};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job_result_a44981551b9c18ba6fe56bf3938ab563cad7c8c85bf79bbe1b7188497c32c3b0ca}{JobResult::Status::Failed}}:}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Failed"{}};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job_result_a44981551b9c18ba6fe56bf3938ab563caa149e85a44aeec9140e92733d9ed694e}{JobResult::Status::Cancelled}}:}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Cancelled"{}};}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Unknown"{}};}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ std::chrono::nanoseconds\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a5043d11aa13e7ccae3e437ab2db2cb90}{GetElapsedTime}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00189\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::chrono::duration\_cast<std::chrono::nanoseconds>(}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::chrono::high\_resolution\_clock::now()\ -\/\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a0e1979f0f75047c0f5d7887d810702cd}{creationTime}});}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_a31e9ec7f2a478604e9bc5a1d961a4d31}{GetDebugName}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00197\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ace943cecd77d506149a1f174552ce556}{debugName}}\ ?\ \mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_sync_point_ace943cecd77d506149a1f174552ce556}{debugName}}\ :\ \textcolor{stringliteral}{"{}UnnamedSyncPoint"{}};}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ===\ Private\ Helpers\ ===}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ PropagateFailure(\mbox{\hyperlink{struct_void_architect_1_1_jobs_1_1_job_result_a44981551b9c18ba6fe56bf3938ab563c}{JobResult::Status}}\ failureStatus);}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ AddToOverflow(\mbox{\hyperlink{namespace_void_architect_1_1_jobs_af593f8164f5ce6fc7c221fc7ac9613e7}{JobHandle}}\ handle);}
\DoxyCodeLine{00218\ \ \ \ \ \};}
\DoxyCodeLine{00219\ \}}

\end{DoxyCode}
