\doxysection{Render\+State\+System.\+hpp}
\hypertarget{_render_state_system_8hpp_source}{}\label{_render_state_system_8hpp_source}\index{engine/src/Systems/RenderStateSystem.hpp@{engine/src/Systems/RenderStateSystem.hpp}}
\mbox{\hyperlink{_render_state_system_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Created\ by\ Michael\ Desmedt\ on\ 27/05/2025.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_render_pass_system_8hpp}{RenderPassSystem.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_renderer_types_8hpp}{Renderer/RendererTypes.hpp}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_render_pass_8hpp}{Resources/RenderPass.hpp}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_render_state_8hpp}{Resources/RenderState.hpp}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_shader_8hpp}{Resources/Shader.hpp}}"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_void_architect}{VoidArchitect}}}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_void_architect_1_1_render_state_config}{RenderStateConfig}}}
\DoxyCodeLine{00014\ \ \ \ \ \{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_a300ed464f2c25657b3b1a04dbaf5e4ea}{name}};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ab154e56c191434ffea69c1b02796319a}{Renderer::MaterialClass}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_ae0e86d188034f4273ac7c2aa0c814f1c}{materialClass}};}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_af2aedb4e6c71af85b7dc379b160c34f8}{Renderer::RenderPassType}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_a45895b9094c9a16749b0d5c50ce2eae1}{passType}};}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ad7d46d61280dc3321621d595946d5cad}{Renderer::VertexFormat}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_a97dd66b41c502f2956be490ef5de85ff}{vertexFormat}}\ =\ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ad7d46d61280dc3321621d595946d5cada52f5e0bc3859bc5f5e25130b6c7e8881}{Renderer::VertexFormat::Position}};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ VAArray<Renderer::ResourceBinding>\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_aa0791bbbfabd4cae10dae879161d63aa}{expectedBindings}};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ VAArray<Resources::ShaderHandle>\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_a54ce6b1e3213f0c0ec6deb9d06be8224}{shaders}};}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ VAArray<Renderer::VertexAttribute>\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_a5d07ad5095ecc03add65c573de15e938}{vertexAttributes}};}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ InputLayout;\ -\/>\ Which\ data\ bindings\ are\ used?}}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ RenderState\ -\/>\ Allow\ configuration\ options\ like\ culling,\ depth\ testing,\ etc.}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config_a30d2e0542982559dc3ecbb4b0ac20004}{GetBindingsHash}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00029\ \ \ \ \ \};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key}{RenderStateCacheKey}}}
\DoxyCodeLine{00032\ \ \ \ \ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ab154e56c191434ffea69c1b02796319a}{Renderer::MaterialClass}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key_aedf9d56d8ee8776def2c9205366d4a4c}{materialClass}};}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_af2aedb4e6c71af85b7dc379b160c34f8}{Renderer::RenderPassType}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key_aa8fa8ce401a3ba17225c3e4fdaa5eec9}{passType}};}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ad7d46d61280dc3321621d595946d5cad}{Renderer::VertexFormat}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key_a896dd30132cd55aaa02a08653ff45861}{vertexFormat}};}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_resources_1_1_render_pass_signature}{Resources::RenderPassSignature}}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key_aa510e4ac5360b18dfef5eaf2525a0d98}{passSignature}};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key_aad3e9192e90afc0974d8f05175524100}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key}{RenderStateCacheKey}}\&\ other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key_ae0eb606829b548e99b53824019eba5fc}{GetHash}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00040\ \ \ \ \ \};}
\DoxyCodeLine{00041\ \}\ \textcolor{comment}{//\ namespace\ VoidArchitect}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacestd}{std}}}
\DoxyCodeLine{00044\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{struct\ }hash<\mbox{\hyperlink{namespace_void_architect}{VoidArchitect}}::RenderStateCacheKey>}
\DoxyCodeLine{00047\ \ \ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structstd_1_1hash_3_01_void_architect_1_1_render_state_cache_key_01_4_aa6290c6e6efd3f2018d8622e7eebe1f1}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key}{VoidArchitect::RenderStateCacheKey}}\&\ key)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ key.GetHash();}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \ \ \};}
\DoxyCodeLine{00053\ \}\ \textcolor{comment}{//\ namespace\ std}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_void_architect}{VoidArchitect}}}
\DoxyCodeLine{00056\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ =\ uint32\_t;}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ InvalidRenderStateHandle\ =\ std::numeric\_limits<}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ uint32\_t>::max();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_void_architect_1_1_render_state_system_a03e6315fda0bb14037fb00185c396f7f}{RenderStateSystem}}}
\DoxyCodeLine{00062\ \ \ \ \ \{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a03e6315fda0bb14037fb00185c396f7f}{RenderStateSystem}}();}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a39793205a4c1f2727a529c648bca0793}{\string~RenderStateSystem}}();}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a56e5d68ef03835a3b6e91610fcc02e3f}{RegisterPermutation}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config}{RenderStateConfig}}\&\ config);}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a49002ed4ba566fcd6c5685085ad819fc}{GetHandleFor}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_cache_key}{RenderStateCacheKey}}\&\ key,\ \mbox{\hyperlink{namespace_void_architect_a0a7e2042bd7abc0b743137291d70bd4e}{RenderPassHandle}}\ passHandle);}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a55f200679f82ac21ab85f9d694b2a94b}{Bind}}(\mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ handle);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_void_architect_1_1_resources_1_1_i_render_state}{Resources::IRenderState}}*\ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a854c075e20dcb30165a674c0ec79b7dc}{GetPointerFor}}(\mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ handle);}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config}{RenderStateConfig}}\&\ \mbox{\hyperlink{class_void_architect_1_1_render_state_system_a275daa8ec7d91fc4254cfd7ed01a8234}{GetConfigFor}}(\mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ handle);}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_void_architect_1_1_resources_1_1_i_render_state}{Resources::IRenderState}}*\ CreateRenderState(}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config}{RenderStateConfig}}\&\ config,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_a0a7e2042bd7abc0b743137291d70bd4e}{RenderPassHandle}}\ passHandle);}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ LoadDefaultRenderStates();}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ GetFreeRenderStateHandle();}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum\ class}\ RenderStateLoadingState}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ Unloaded,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ Loading,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ Loaded}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }RenderStateData}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ RenderStateLoadingState\ state\ =\ RenderStateLoadingState::Unloaded;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_void_architect_1_1_render_state_config}{RenderStateConfig}}\ config;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_void_architect_1_1_resources_1_1_i_render_state}{Resources::IRenderState}}*\ renderStatePtr\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }ConfigLookupKey\ =\ std::tuple<}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ab154e56c191434ffea69c1b02796319a}{Renderer::MaterialClass}},\ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_af2aedb4e6c71af85b7dc379b160c34f8}{Renderer::RenderPassType}},\ \mbox{\hyperlink{namespace_void_architect_1_1_renderer_ad7d46d61280dc3321621d595946d5cad}{Renderer::VertexFormat}}>;}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ VAHashMap<ConfigLookupKey,\ RenderStateConfig>\ m\_ConfigMap;}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ VAArray<RenderStateData>\ m\_RenderStates;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ VAHashMap<RenderStateCacheKey,\ RenderStateHandle>\ m\_RenderStateCache;}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ std::queue<RenderStateHandle>\ m\_FreeRenderStateHandles;}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_void_architect_a10b206cefcde9a579f6f29ed09cbd690}{RenderStateHandle}}\ m\_NextFreeRenderStateHandle\ =\ 0;}
\DoxyCodeLine{00107\ \ \ \ \ \};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{inline}\ std::unique\_ptr<RenderStateSystem>\ \mbox{\hyperlink{namespace_void_architect_a2a35dadc8f8d6eef2e5d439a7fbd2420}{g\_RenderStateSystem}};}
\DoxyCodeLine{00110\ \}\ \textcolor{comment}{//\ namespace\ VoidArchitect}}

\end{DoxyCode}
